<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Mahesh Positive News Feed</title>

<!-- ===================== STYLES ===================== -->
<style>
/* ---- SAME CSS AS YOUR ORIGINAL (UNCHANGED) ---- */
:root {
  --bg:#fff;--bg-soft:#f9fafb;--accent:#38bdf8;--text-main:#111827;
  --text-muted:#6b7280;--card-border:#e5e7eb;--chip-bg:#f3f4f6;
  --shadow-soft:0 6px 16px rgba(15,23,42,.08);--radius-xl:18px
}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:system-ui,-apple-system,sans-serif;background:#fff;color:var(--text-main);
display:flex;justify-content:center;padding:32px 16px}
.app-shell{max-width:1100px;width:100%;border-radius:28px;
box-shadow:0 20px 40px rgba(15,23,42,.08);border:1px solid #e5e7eb;padding:20px}

/* chips */
.filters-bar{display:flex;flex-wrap:wrap;gap:8px}
.filter-chip{border-radius:999px;padding:6px 11px;font-size:.78rem;
border:1px solid #94a3b8;background:var(--chip-bg);cursor:pointer;display:flex;gap:6px}
.filter-chip.active{background:#e0f2fe;border-color:#38bdf8}
.filter-chip span.dot{width:8px;height:8px;border-radius:999px;background:#94a3b8}

/* cards */
.news-card{background:#f9fafb;border:1px solid var(--card-border);
border-radius:18px;padding:12px;box-shadow:var(--shadow-soft)}
.news-card.hidden{display:none}
.badge{font-size:.65rem;padding:4px 8px;border-radius:999px;background:#e5e7eb}
.badge--positive{background:#dcfce7;border-color:#22c55e}
.news-title{font-size:.95rem;font-weight:600}
.tagline{font-size:.78rem;color:#4f46e5}
.news-footer{display:flex;justify-content:space-between;font-size:.7rem}
</style>
</head>

<body>
<div class="app-shell">

<!-- ===================== HEADER ===================== -->
<header>
<h1>Mahesh Positive News Feed</h1>

<div class="filters-bar">
<button class="filter-chip active" data-filter="all"><span class="dot"></span>All</button>
<button class="filter-chip" data-filter="current"><span class="dot"></span>Current</button>
<button class="filter-chip" data-filter="ai"><span class="dot"></span>AI</button>
<button class="filter-chip" data-filter="startups"><span class="dot"></span>Startups</button>
<button class="filter-chip" data-filter="markets"><span class="dot"></span>Markets</button>
<button class="filter-chip" data-filter="politics"><span class="dot"></span>Politics</button>
<button class="filter-chip" data-filter="sports"><span class="dot"></span>Sports</button>

<!-- ðŸ†• Automobile + EV -->
<button class="filter-chip" data-filter="automobile"><span class="dot"></span>Automobile</button>
<button class="filter-chip" data-filter="ev"><span class="dot"></span>EV</button>

<button class="filter-chip" id="refresh-btn"><span class="dot"></span>Refresh</button>
</div>
</header>

<!-- ===================== MAIN ===================== -->
<main>
<div id="news-list"></div>
</main>

<!-- ===================== SCRIPT ===================== -->
<script>
/* ================= RSS SOURCES ================= */

// Automobile
const CARWALE_URL = "https://api.rss2json.com/v1/api.json?rss_url=https://www.carwale.com/rss/news/";
const OVERDRIVE_URL = "https://api.rss2json.com/v1/api.json?rss_url=https://overdrive.in/rss/news/";
const AUTOCAR_URL = "https://api.rss2json.com/v1/api.json?rss_url=https://www.autocar.co.uk/rss/news";
const MOTOR1_URL = "https://api.rss2json.com/v1/api.json?rss_url=https://www.motor1.com/rss/news/";

// Existing
const TBI_URL = "https://api.rss2json.com/v1/api.json?rss_url=https://www.thebetterindia.com/feed/";

const newsList=document.getElementById("news-list");
let allArticles=[];
let activeCategory="all";

/* ================= CLASSIFICATION ================= */
function classifyArticle(a){
const t=((a.title||"")+" "+(a.description||"")+" "+(a.content||"")).toLowerCase();

if(t.includes("electric vehicle")||t.includes(" ev ")||t.includes("charging")||t.includes("battery"))
return "ev";

if(t.includes("car")||t.includes("automobile")||t.includes("vehicle")||
t.includes("tesla")||t.includes("tata motors")||t.includes("mahindra"))
return "automobile";

if(t.includes("ai")||t.includes("artificial intelligence"))return"ai";
if(t.includes("startup")||t.includes("funding"))return"startups";
if(t.includes("market")||t.includes("sensex"))return"markets";
if(t.includes("election")||t.includes("minister"))return"politics";
if(t.includes("cricket")||t.includes("football"))return"sports";

return"current";
}

/* ================= POSITIVITY ================= */
function getPositivityScore(a){
let s=0;
const c=a.forcedCategory||classifyArticle(a);
const t=(a.title+" "+a.description).toLowerCase();

if(c==="ev")s+=4;
if(c==="automobile")s+=1;
if(c==="ai"||c==="startups")s+=2;

["growth","boost","breakthrough","clean","sustainable","record"].forEach(w=>{
if(t.includes(w))s+=2;
});
["crash","fraud","scam","violence"].forEach(w=>{
if(t.includes(w))s-=5;
});
return s;
}

/* ================= CARD ================= */
function createCard(a){
const cat=a.forcedCategory||classifyArticle(a);
const el=document.createElement("div");
el.className="news-card";
el.dataset.category=cat;
el.innerHTML=`
<span class="badge">${cat.toUpperCase()}</span>
<span class="badge badge--positive">Positive</span>
<h3 class="news-title">${a.title}</h3>
<p class="tagline">${a.description}</p>
<div class="news-footer">
<span>${a.source.name}</span>
<a href="${a.url}" target="_blank">Read â†—</a>
</div>`;
return el;
}

/* ================= FILTER ================= */
document.querySelectorAll(".filter-chip[data-filter]").forEach(b=>{
b.onclick=()=>{
activeCategory=b.dataset.filter;
document.querySelectorAll(".filter-chip").forEach(x=>x.classList.remove("active"));
b.classList.add("active");
render();
};
});

/* ================= LOAD ================= */
async function loadNews(){
newsList.innerHTML="Loadingâ€¦";
const res=await Promise.all([
fetch(TBI_URL),
fetch(CARWALE_URL),
fetch(OVERDRIVE_URL),
fetch(AUTOCAR_URL),
fetch(MOTOR1_URL)
]);
const data=await Promise.all(res.map(r=>r.json()));
allArticles=[];

data.forEach((d,i)=>{
if(d.status==="ok"){
d.items.slice(0,6).forEach(it=>{
allArticles.push({
title:it.title,
description:it.description.replace(/<[^>]+>/g,""),
content:it.content||"",
url:it.link,
source:{name:d.feed.title},
forcedCategory:i===0?null:classifyArticle(it)
});
});
}
});

allArticles.sort((a,b)=>getPositivityScore(b)-getPositivityScore(a));
render();
}

/* ================= RENDER ================= */
function render(){
newsList.innerHTML="";
allArticles
.filter(a=>activeCategory==="all"||
(a.forcedCategory||classifyArticle(a))===activeCategory||
(activeCategory==="automobile"&&(a.forcedCategory||classifyArticle(a))==="ev"))
.forEach(a=>newsList.appendChild(createCard(a)));
}

document.getElementById("refresh-btn").onclick=loadNews;
loadNews();
</script>

</div>
</body>
</html>
