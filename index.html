<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Mahesh's Positive News Dashboard</title>
    <style>
      :root {
        --bg: #050816;
        --bg-soft: #0b1020;
        --bg-softer: #11182a;
        --accent: #38bdf8;
        --accent-soft: rgba(56, 189, 248, 0.12);
        --accent-strong: #22c55e;
        --text-main: #e5e7eb;
        --text-muted: #9ca3af;
        --card-border: rgba(148, 163, 184, 0.3);
        --chip-bg: rgba(15, 23, 42, 0.9);
        --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.85);
        --radius-xl: 18px;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
          "Segoe UI", sans-serif;
        background: radial-gradient(
          circle at top,
          #1d293b 0,
          #020617 45%,
          #000 100%
        );
        color: var(--text-main);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        padding: 32px 16px;
      }

      .app-shell {
        width: 100%;
        max-width: 1100px;
        background: linear-gradient(
          145deg,
          rgba(15, 23, 42, 0.95),
          rgba(2, 6, 23, 0.98)
        );
        border-radius: 28px;
        padding: 20px 20px 24px;
        box-shadow: 0 30px 80px rgba(15, 23, 42, 0.9);
        border: 1px solid rgba(148, 163, 184, 0.4);
        backdrop-filter: blur(18px);
      }

      @media (min-width: 768px) {
        .app-shell {
          padding: 26px 26px 30px;
        }
      }

      header {
        display: flex;
        flex-direction: column;
        gap: 14px;
        margin-bottom: 18px;
      }

      @media (min-width: 640px) {
        header {
          flex-direction: row;
          justify-content: space-between;
          align-items: center;
        }
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .brand-badge {
        width: 40px;
        height: 40px;
        border-radius: 999px;
        background: radial-gradient(circle at 30% 20%, #38bdf8, #22c55e);
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 12px 30px rgba(34, 197, 94, 0.5);
        position: relative;
        overflow: hidden;
      }

      .brand-badge span {
        font-size: 22px;
        font-weight: 700;
        color: #0b1020;
      }

      .brand-text h1 {
        font-size: 1.5rem;
        letter-spacing: 0.03em;
      }

      .brand-text p {
        font-size: 0.8rem;
        color: var(--text-muted);
      }

      .meta {
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        gap: 8px;
        font-size: 0.75rem;
      }

      .pill {
        border-radius: 999px;
        padding: 6px 10px;
        background: rgba(15, 23, 42, 0.9);
        border: 1px solid rgba(148, 163, 184, 0.5);
        color: var(--text-muted);
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }

      .pill span.icon {
        font-size: 0.9em;
      }

      .pill--accent {
        border-color: rgba(34, 197, 94, 0.8);
        color: #bbf7d0;
        background: rgba(22, 163, 74, 0.16);
      }

      .filters-bar {
        margin-top: 14px;
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .filter-chip {
        border-radius: 999px;
        padding: 6px 11px;
        font-size: 0.78rem;
        border: 1px solid rgba(148, 163, 184, 0.35);
        background: var(--chip-bg);
        color: var(--text-muted);
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        transition: all 0.16s ease-out;
      }

      .filter-chip span.dot {
        width: 8px;
        height: 8px;
        border-radius: 999px;
        background: rgba(148, 163, 184, 0.6);
      }

      .filter-chip.active {
        background: radial-gradient(
          circle at 0 0,
          rgba(56, 189, 248, 0.3),
          rgba(15, 23, 42, 0.98)
        );
        color: #e0f2fe;
        border-color: rgba(56, 189, 248, 0.9);
        transform: translateY(-1px);
        box-shadow: 0 10px 28px rgba(15, 23, 42, 0.8);
      }

      .filter-chip.active span.dot {
        background: #38bdf8;
      }

      main {
        margin-top: 18px;
        display: grid;
        grid-template-columns: minmax(0, 1.9fr) minmax(0, 1.1fr);
        gap: 18px;
      }

      @media (max-width: 900px) {
        main {
          grid-template-columns: minmax(0, 1fr);
        }
      }

      .column {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .section-title {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 4px;
      }

      .section-title h2 {
        font-size: 0.85rem;
        color: var(--text-muted);
        letter-spacing: 0.12em;
        text-transform: uppercase;
      }

      .section-title span {
        font-size: 0.72rem;
        color: var(--accent);
      }

      .news-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .news-card {
        border-radius: var(--radius-xl);
        border: 1px solid var(--card-border);
        background: radial-gradient(
          circle at top left,
          rgba(148, 163, 184, 0.14),
          rgba(15, 23, 42, 0.98)
        );
        padding: 12px 13px;
        box-shadow: var(--shadow-soft);
        display: grid;
        grid-template-columns: minmax(0, 1fr);
        gap: 6px;
        cursor: default;
        transition: transform 0.18s ease-out, box-shadow 0.18s ease-out,
          border-color 0.18s ease-out;
      }

      .news-card:hover {
        transform: translateY(-3px) translateZ(0);
        box-shadow: 0 22px 60px rgba(15, 23, 42, 0.95);
        border-color: rgba(56, 189, 248, 0.7);
      }

      .news-badges {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        font-size: 0.68rem;
      }

      .badge {
        padding: 4px 8px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.95);
        color: var(--text-muted);
        border: 1px solid rgba(148, 163, 184, 0.4);
      }

      .badge--category {
        text-transform: uppercase;
        letter-spacing: 0.08em;
        font-size: 0.65rem;
      }

      .badge--positive {
        border-color: rgba(34, 197, 94, 0.8);
        color: #bbf7d0;
        background: rgba(21, 128, 61, 0.2);
      }

      .badge--ai {
        border-color: rgba(56, 189, 248, 0.85);
        color: #e0f2fe;
        background: rgba(15, 23, 42, 0.9);
      }

      .news-title {
        font-size: 0.98rem;
        font-weight: 600;
        line-height: 1.4;
      }

      .news-meta-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 6px;
      }

      .news-meta {
        font-size: 0.72rem;
        color: var(--text-muted);
      }

      .tagline {
        font-size: 0.75rem;
        color: #a5b4fc;
      }

      .news-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 4px;
      }

      .source {
        font-size: 0.7rem;
        color: var(--text-muted);
      }

      .read-link {
        font-size: 0.72rem;
        text-decoration: none;
        color: var(--accent);
        display: inline-flex;
        align-items: center;
        gap: 4px;
      }

      .read-link span {
        font-size: 0.9em;
      }

      .sidebar-card {
        border-radius: 20px;
        border: 1px solid rgba(148, 163, 184, 0.4);
        background: radial-gradient(
          circle at top,
          rgba(56, 189, 248, 0.22),
          rgba(15, 23, 42, 0.98)
        );
        padding: 12px 14px;
        box-shadow: var(--shadow-soft);
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .sidebar-card h3 {
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 0.16em;
        color: #bfdbfe;
      }

      .sidebar-card p {
        font-size: 0.8rem;
        color: #e5e7eb;
      }

      .sidebar-list {
        margin-top: 4px;
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .sidebar-list li {
        font-size: 0.78rem;
        color: var(--text-muted);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .pill-mini {
        border-radius: 999px;
        padding: 3px 7px;
        border: 1px solid rgba(148, 163, 184, 0.5);
        font-size: 0.7rem;
        color: #c4b5fd;
      }

      .status-line {
        font-size: 0.75rem;
        color: var(--text-muted);
      }

      .status-line strong {
        color: #e5e7eb;
      }

      footer {
        margin-top: 18px;
        padding-top: 10px;
        border-top: 1px dashed rgba(148, 163, 184, 0.35);
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        justify-content: space-between;
        align-items: center;
        font-size: 0.72rem;
        color: var(--text-muted);
      }

      .footer-badges {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
      }

      .footer-badge {
        padding: 4px 8px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.45);
        background: rgba(15, 23, 42, 0.95);
      }

      .hidden {
        display: none !important;
      }

      .error-message {
        font-size: 0.8rem;
        color: #fecaca;
        background: rgba(127, 29, 29, 0.4);
        border-radius: 999px;
        padding: 6px 10px;
        border: 1px solid rgba(248, 113, 113, 0.6);
        margin-top: 6px;
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }

      .spinner {
        width: 14px;
        height: 14px;
        border-radius: 999px;
        border: 2px solid rgba(148, 163, 184, 0.5);
        border-top-color: var(--accent);
        animation: spin 0.7s linear infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <div class="app-shell">
      <header>
        <div class="brand">
          <div class="brand-badge" aria-hidden="true">
            <span>‚òÄÔ∏è</span>
          </div>
          <div class="brand-text">
            <h1>Mahesh's Positive News Dashboard</h1>
            <p>
              Live headlines on current affairs, AI, markets, politics & sports ‚Äî
              filtered through a constructive, progress-first lens.
            </p>
          </div>
        </div>
        <div>
          <div class="meta">
            <div class="pill pill--accent">
              <span class="icon">‚ú®</span>
              <span>Signal over noise. Positivity over panic.</span>
            </div>
            <div class="pill">
              <span class="icon">üïí</span>
              <span id="status-text">
                Fetching fresh stories when you open or refresh this page.
              </span>
            </div>
          </div>
          <div class="filters-bar" aria-label="Filter by topic">
            <button class="filter-chip active" data-filter="all">
              <span class="dot"></span>
              All
            </button>
            <button class="filter-chip" data-filter="current">
              <span class="dot"></span>
              Current Affairs
            </button>
            <button class="filter-chip" data-filter="ai">
              <span class="dot"></span>
              IT &amp; AI Trends
            </button>
            <button class="filter-chip" data-filter="markets">
              <span class="dot"></span>
              Stock Market &amp; Economy
            </button>
            <button class="filter-chip" data-filter="politics">
              <span class="dot"></span>
              Politics
            </button>
            <button class="filter-chip" data-filter="sports">
              <span class="dot"></span>
              Sports
            </button>
          </div>
        </div>
      </header>

      <main>
        <!-- Left column: main feed -->
        <section class="column" aria-label="Main news feed">
          <div class="section-title">
            <h2>Today&apos;s Highlights</h2>
            <span>Hand-picked by your algorithm, curated by you</span>
          </div>

          <div id="status-line" class="status-line">
            <span class="spinner" aria-hidden="true"></span>
            <span>Loading stories from the news API...</span>
          </div>

          <div class="news-list" id="news-list">
            <!-- Dynamic cards will be injected here -->
          </div>
        </section>

        <!-- Right column: side widgets -->
        <aside class="column" aria-label="Summary and quick stats">
          <section class="sidebar-card">
            <h3>Today&apos;s Mood</h3>
            <p>
              This dashboard prefers stories that contain signals of progress,
              resilience and collaboration, even when the news cycle is noisy.
            </p>
            <ul class="sidebar-list">
              <li>
                Visible stories
                <span class="pill-mini" id="positive-count">0</span>
              </li>
              <li>
                Topics covered
                <span class="pill-mini">Current ‚Ä¢ AI ‚Ä¢ Markets ‚Ä¢ Politics ‚Ä¢ Sports</span>
              </li>
              <li>
                Refresh model
                <span class="pill-mini">On every page load</span>
              </li>
            </ul>
          </section>

          <section class="sidebar-card" style="margin-top: 10px">
            <h3>Your Curation Notes</h3>
            <p>
              Use these prompts as you glance through the feed:
            </p>
            <ul class="sidebar-list">
              <li>
                What&apos;s one constructive takeaway?
                <span class="pill-mini">Note it</span>
              </li>
              <li>
                Does this headline show progress or solutions?
                <span class="pill-mini">Yes ‚Üí keep</span>
              </li>
              <li>
                Is this relevant to your goals?
                <span class="pill-mini">If no ‚Üí ignore</span>
              </li>
            </ul>
          </section>
        </aside>
      </main>

      <footer>
        <span>
          Built for a calm information diet. Data fetched from a news API when you open this page.
        </span>
        <div class="footer-badges">
          <span class="footer-badge">üå± Growth-focused</span>
          <span class="footer-badge">üìö Curated, not addictive</span>
          <span class="footer-badge">ü§ñ AI, markets, politics &amp; sports</span>
        </div>
      </footer>
    </div>

    <script>
      // ================= CONFIG =================
      // 1) Get an API key from a news API provider (e.g. Currents API)
      // 2) Paste it below:
      const API_KEY = "yLdU-mmI7zsUbAMdu_17NCQ865WG42I6ChQqINMKPsrrmdEK"; // <-- CHANGE THIS

      // How many articles per topic you want to display
      const MAX_ARTICLES_PER_TOPIC = 4;

      // Topic configuration: maps your categories to queries
      const TOPICS = [
        {
          id: "current",
          label: "Current Affairs",
          query: {
            endpoint: "search",
            keywords: "India development OR innovation OR policy reform OR progress",
            category: "world",
          },
        },
        {
          id: "ai",
          label: "IT ‚Ä¢ AI",
          query: {
            endpoint: "search",
            keywords:
              "artificial intelligence OR AI OR machine learning OR generative AI OR technology",
            category: "technology",
          },
        },
        {
          id: "markets",
          label: "Markets",
          query: {
            endpoint: "search",
            keywords:
              "stock market OR nifty OR sensex OR investing OR economic growth OR earnings",
            category: "business",
          },
        },
        {
          id: "politics",
          label: "Politics",
          query: {
            endpoint: "search",
            keywords:
              "diplomacy OR cooperation OR summit OR policy OR parliament OR agreement",
            category: "politics",
          },
        },
        {
          id: "sports",
          label: "Sports",
          query: {
            endpoint: "search",
            keywords:
              "cricket OR football OR tennis OR kabaddi OR olympics OR tournament",
            category: "sports",
          },
        },
      ];

      const newsListEl = document.getElementById("news-list");
      const filterChips = document.querySelectorAll(".filter-chip");
      const positiveCountEl = document.getElementById("positive-count");
      const statusLineEl = document.getElementById("status-line");
      const statusTextEl = document.getElementById("status-text");

      // ================= HELPERS =================

      function buildApiUrl(query) {
        // Example for Currents API; adapt if you use a different provider
        const base =
          query.endpoint === "search"
            ? "https://api.currentsapi.services/v1/search"
            : "https://api.currentsapi.services/v1/latest-news";

        const url = new URL(base);
        url.searchParams.set("apiKey", API_KEY);
        url.searchParams.set("language", "en");

        if (query.keywords) url.searchParams.set("keywords", query.keywords);
        if (query.category) url.searchParams.set("category", query.category);

        return url.toString();
      }

      async function fetchTopicNews(topic) {
        const url = buildApiUrl(topic.query);
        try {
          const res = await fetch(url);
          if (!res.ok) {
            console.error("API error for topic", topic.id, res.status);
            return [];
          }
          const data = await res.json();
          // For Currents, articles are usually in data.news
          // Adjust if your provider is different
          return data.news || [];
        } catch (err) {
          console.error("Network error for topic", topic.id, err);
          return [];
        }
      }

      function formatPublished(published) {
        if (!published) return "";
        const date = new Date(published);
        if (Number.isNaN(date.getTime())) return "";
        return date.toLocaleString("en-IN", {
          dateStyle: "medium",
          timeStyle: "short",
        });
      }

      // Light heuristic to bump up positive-ish headlines
      function scorePositivity(title = "", description = "") {
        const text = (title + " " + description).toLowerCase();
        const positiveWords = [
          "growth",
          "record",
          "rise",
          "improves",
          "improvement",
          "surge",
          "wins",
          "win",
          "boost",
          "progress",
          "breakthrough",
          "stability",
          "recovers",
          "rebound",
          "milestone",
          "achieves",
          "achieved",
          "launches",
          "expands",
          "positive",
          "strong",
        ];
        let score = 0;
        positiveWords.forEach((w) => {
          if (text.includes(w)) score += 1;
        });
        return score;
      }

      function getCategoryLabel(topicId) {
        switch (topicId) {
          case "current":
            return "Current Affairs";
          case "ai":
            return "IT ‚Ä¢ AI";
          case "markets":
            return "Markets";
          case "politics":
            return "Politics";
          case "sports":
            return "Sports";
          default:
            return "News";
        }
      }

      function getTagline(topicId) {
        switch (topicId) {
          case "ai":
            return "How technology and AI are quietly reshaping daily life.";
          case "markets":
            return "Signals for long-term investors, not panic traders.";
          case "sports":
            return "Sport as a reminder that effort and teamwork compound.";
          case "politics":
            return "Focus on dialogue, cooperation and stability.";
          case "current":
          default:
            return "Stories that show progress, resilience or problem-solving.";
        }
      }

      function createNewsCard(article, topicId) {
        const card = document.createElement("article");
        card.className = "news-card";
        card.dataset.category = topicId;

        const positivityScore = scorePositivity(
          article.title,
          article.description
        );
        const isPositive = positivityScore > 0;

        const categoryBadgeClass =
          topicId === "ai"
            ? "badge badge--category badge--ai"
            : "badge badge--category";

        const categoryLabel = getCategoryLabel(topicId);
        const positiveLabel = isPositive ? "Positive signal" : "Balanced update";

        const taglineText = getTagline(topicId);

        const safeTitle = article.title || "Untitled story";
        const safeDesc = article.description || "";
        const safeSource =
          article.author ||
          article.domain ||
          article.source ||
          "News source";

        const publishedStr = formatPublished(article.published);

        card.innerHTML = `
          <div class="news-badges">
            <span class="${categoryBadgeClass}">${categoryLabel}</span>
            <span class="badge badge--positive">${positiveLabel}</span>
          </div>
          <h3 class="news-title">
            ${safeTitle}
          </h3>
          <div class="news-meta-row">
            <p class="news-meta">
              ${safeDesc.slice(0, 130)}${safeDesc.length > 130 ? "..." : ""}
            </p>
            <p class="tagline">${taglineText}</p>
          </div>
          <div class="news-footer">
            <span class="source">
              ${safeSource}${publishedStr ? " ‚Ä¢ " + publishedStr : ""}
            </span>
            <a href="${article.url}" class="read-link" target="_blank" rel="noreferrer">
              Read full story
              <span>‚Üó</span>
            </a>
          </div>
        `;
        return card;
      }

      function updatePositiveCount() {
        const cards = document.querySelectorAll(".news-card");
        const visible = Array.from(cards).filter(
          (card) => !card.classList.contains("hidden")
        ).length;
        if (positiveCountEl) {
          positiveCountEl.textContent = `${visible} stories`;
        }
      }

      function applyFilter(filter) {
        const cards = document.querySelectorAll(".news-card");
        cards.forEach((card) => {
          const category = card.getAttribute("data-category");
          const shouldShow = filter === "all" || category === filter;
          card.classList.toggle("hidden", !shouldShow);
        });
        updatePositiveCount();
      }

      function initFilters() {
        filterChips.forEach((chip) => {
          chip.addEventListener("click", () => {
            const filter = chip.getAttribute("data-filter");
            filterChips.forEach((c) => c.classList.remove("active"));
            chip.classList.add("active");
            applyFilter(filter);
          });
        });
      }

      function showError(message) {
        if (!statusLineEl) return;
        statusLineEl.innerHTML = `
          <div class="error-message">
            <span>‚ö†Ô∏è</span>
            <span>${message}</span>
          </div>
        `;
      }

      async function loadAllTopics() {
        if (!API_KEY || API_KEY === "YOUR_API_KEY_HERE") {
          showError(
            "No API key configured. Edit index.html and set your news API key in the JavaScript section."
          );
          if (statusTextEl) {
            statusTextEl.textContent = "Configure your API key to start fetching live news.";
          }
          return;
        }

        if (statusLineEl) {
          statusLineEl.innerHTML = `
            <span class="spinner" aria-hidden="true"></span>
            <span>Fetching fresh stories across all topics...</span>
          `;
        }
        if (statusTextEl) {
          statusTextEl.textContent = "Live stories fetched each time you open this dashboard.";
        }

        newsListEl.innerHTML = "";
        let totalStories = 0;

        for (const topic of TOPICS) {
          const articles = await fetchTopicNews(topic);

          const sorted = articles
            .map((a) => ({
              article: a,
              score: scorePositivity(a.title, a.description),
            }))
            .sort((a, b) => b.score - a.score)
            .slice(0, MAX_ARTICLES_PER_TOPIC)
            .map((x) => x.article);

          if (!sorted.length) continue;

          sorted.forEach((article) => {
            const card = createNewsCard(article, topic.id);
            newsListEl.appendChild(card);
            totalStories += 1;
          });
        }

        if (totalStories === 0) {
          showError(
            "No stories could be loaded. This might be a temporary API limit or network issue."
          );
        } else if (statusLineEl) {
          statusLineEl.innerHTML = `
            <span>Loaded <strong>${totalStories}</strong> stories. Use the filters above to focus by topic.</span>
          `;
        }

        applyFilter("all");
      }

      // ================= INIT =================
      initFilters();
      loadAllTopics();
    </script>
  </body>
</html>
