<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mahesh Positive News Feed</title>

  <!-- ================== STYLES (UNCHANGED) ================== -->
  <style>
    /* (STYLE BLOCK IS IDENTICAL TO YOUR ORIGINAL ‚Äî OMITTED HERE FOR BREVITY) */
  </style>
</head>

<body>
<div class="app-shell">

<!-- ================= HEADER ================= -->
<header>
  <div class="brand">
    <div class="brand-badge"><span>‚òÄÔ∏è</span></div>
    <div class="brand-text">
      <h1>Mahesh Positive News Feed</h1>
      <p>Curated daily with an optimistic lens.</p>
    </div>
  </div>

  <div class="header-right">
    <nav>
      <a class="nav-link active">News Feed</a>
    </nav>

    <!-- ================= CATEGORY FILTERS ================= -->
    <div class="filters-bar">
      <button class="filter-chip active" data-filter="all"><span class="dot"></span>All</button>
      <button class="filter-chip" data-filter="current"><span class="dot"></span>Current Affairs</button>
      <button class="filter-chip" data-filter="ai"><span class="dot"></span>AI & Tech</button>
      <button class="filter-chip" data-filter="startups"><span class="dot"></span>Startups</button>
      <button class="filter-chip" data-filter="markets"><span class="dot"></span>Markets</button>
      <button class="filter-chip" data-filter="politics"><span class="dot"></span>Politics</button>
      <button class="filter-chip" data-filter="sports"><span class="dot"></span>Sports</button>

      <!-- üÜï AUTOMOBILE CATEGORY -->
      <button class="filter-chip" data-filter="automobile">
        <span class="dot"></span>Automobile
      </button>

      <button id="refresh-btn" class="filter-chip">Refresh</button>
    </div>
  </div>
</header>

<!-- ================= MAIN ================= -->
<main>
<section class="column">
  <h2 class="section-title">Today's Highlights</h2>
  <div id="news-list"></div>
</section>
</main>

<footer>
  ¬© <span id="year"></span> Mahesh Ramanathan
</footer>

</div>

<!-- ================= JAVASCRIPT ================= -->
<script>
/* ================= RSS FEEDS ================= */

// Automobile ‚Äì India
const AUTO_CARWALE_RSS = "https://www.carwale.com/rss/news/";
const AUTO_OVERDRIVE_RSS = "https://overdrive.in/rss/news/";

// Automobile ‚Äì Global
const AUTO_AUTOCAR_GLOBAL_RSS = "https://www.autocar.co.uk/rss/news";
const AUTO_MOTOR1_RSS = "https://www.motor1.com/rss/news/";

// Convert to RSS2JSON
const AUTO_CARWALE_URL = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(AUTO_CARWALE_RSS)}`;
const AUTO_OVERDRIVE_URL = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(AUTO_OVERDRIVE_RSS)}`;
const AUTO_AUTOCAR_GLOBAL_URL = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(AUTO_AUTOCAR_GLOBAL_RSS)}`;
const AUTO_MOTOR1_URL = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(AUTO_MOTOR1_RSS)}`;

const newsList = document.getElementById("news-list");
let allArticles = [];
let activeCategory = "all";

/* ================= CLASSIFICATION ================= */
function classifyArticle(article) {
  const text = ((article.title||"") + " " + (article.description||"")).toLowerCase();

  if (
    text.includes("car") ||
    text.includes("automobile") ||
    text.includes("vehicle") ||
    text.includes("ev") ||
    text.includes("electric") ||
    text.includes("suv") ||
    text.includes("sedan") ||
    text.includes("tesla") ||
    text.includes("tata motors") ||
    text.includes("mahindra") ||
    text.includes("maruti") ||
    text.includes("bmw") ||
    text.includes("mercedes")
  ) return "automobile";

  if (text.includes("ai") || text.includes("artificial intelligence")) return "ai";
  if (text.includes("startup")) return "startups";
  if (text.includes("market") || text.includes("sensex")) return "markets";
  if (text.includes("election") || text.includes("minister")) return "politics";
  if (text.includes("cricket") || text.includes("football")) return "sports";

  return "current";
}

/* ================= UI ================= */
function createCard(a) {
  const card = document.createElement("div");
  card.className = "news-card";
  card.dataset.category = a.category;

  card.innerHTML = `
    <span class="badge">${a.category.toUpperCase()}</span>
    <h3>${a.title}</h3>
    <p>${a.description}</p>
    <small>${a.source}</small>
    <a href="${a.url}" target="_blank">Read ‚Üó</a>
  `;
  return card;
}

/* ================= FILTER ================= */
document.querySelectorAll(".filter-chip[data-filter]").forEach(btn=>{
  btn.onclick=()=>{
    activeCategory=btn.dataset.filter;
    document.querySelectorAll(".filter-chip").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    render();
  };
});

/* ================= LOAD NEWS ================= */
async function loadNews(){
  const responses = await Promise.all([
    fetch(AUTO_CARWALE_URL),
    fetch(AUTO_OVERDRIVE_URL),
    fetch(AUTO_AUTOCAR_GLOBAL_URL),
    fetch(AUTO_MOTOR1_URL)
  ]);

  const data = await Promise.all(responses.map(r=>r.json()));
  allArticles = [];

  data.forEach(feed=>{
    if(feed.status==="ok"){
      feed.items.slice(0,6).forEach(item=>{
        allArticles.push({
          title:item.title,
          description:item.description.replace(/<[^>]+>/g,""),
          url:item.link,
          source:feed.feed.title,
          category:"automobile"
        });
      });
    }
  });

  render();
}

/* ================= RENDER ================= */
function render(){
  newsList.innerHTML="";
  allArticles
    .filter(a=>activeCategory==="all"||a.category===activeCategory)
    .forEach(a=>newsList.appendChild(createCard(a)));
}

document.getElementById("refresh-btn").onclick=loadNews;
document.getElementById("year").textContent=new Date().getFullYear();

loadNews();
</script>
</body>
</html>
