<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tamil Fix Test</title>
    <style>
        body { font-family: system-ui; padding: 20px; background: #f8fafc; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 24px; border-radius: 12px; }
        .test-section { margin: 20px 0; padding: 16px; border: 1px solid #e2e8f0; border-radius: 8px; }
        .success { border-color: #059669; background: #f0fdf4; }
        .error { border-color: #dc2626; background: #fef2f2; }
        button { background: #1e40af; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; margin: 4px; }
        .tamil-text { font-size: 1.1rem; line-height: 1.6; color: #1e293b; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ЁЯЗоЁЯЗ│ Tamil Translation Fix Test</h1>
        
        <div class="test-section success">
            <h3>тЬЕ Test 1: UI Translation Keys</h3>
            <p>Testing if all Tamil UI translations are available:</p>
            <div id="ui-test-result"></div>
            <button onclick="testUITranslations()">Test UI Translations</button>
        </div>

        <div class="test-section success">
            <h3>ЁЯУ░ Test 2: RSS Feed URLs</h3>
            <p>Testing if Tamil RSS feeds are accessible:</p>
            <div id="feed-test-result"></div>
            <button onclick="testTamilFeeds()">Test Tamil RSS Feeds</button>
        </div>

        <div class="test-section success">
            <h3>ЁЯФН Test 3: Content Detection</h3>
            <p class="tamil-text">родрооро┐ро┤рпН роЙро│рпНро│роЯроХрпНроХроорпН: роЗродрпБ роТро░рпБ родрооро┐ро┤рпН роЪрпЖропрпНродро┐ родро▓рпИрокрпНрокрпБ</p>
            <p>English content: This is an English news headline</p>
            <div id="detection-test-result"></div>
            <button onclick="testContentDetection()">Test Content Detection</button>
        </div>
    </div>

    <script>
        // Tamil translations (copied from main file)
        const translations = {
            ta: {
                name: 'родрооро┐ро┤рпН',
                flag: 'ЁЯЗоЁЯЗ│',
                ui: {
                    todaysHighlights: "роЗройрпНро▒рпИроп роЪро┐ро▒рокрпНрокрпБроХро│рпН",
                    readMore: "рокроЯро┐роХрпНроХ",
                    source: "роорпВро▓роорпН",
                    loading: "роПро▒рпНро▒рпБроХро┐ро▒родрпБ...",
                    translating: "роХроЯрпНроЯрпБро░рпИроХро│рпИ роорпКро┤ро┐рокрпЖропро░рпНроХрпНроХро┐ро▒родрпБ...",
                    refresh: "рокрпБродрпБрокрпНрокро┐роХрпНроХ",
                    listView: "рокроЯрпНроЯро┐ропро▓рпН роХро╛роЯрпНроЪро┐",
                    gridView: "роХро┐ро░ро┐роЯрпН роХро╛роЯрпНроЪро┐",
                    allSources: "роЕройрпИродрпНродрпБ роорпВро▓роЩрпНроХро│рпН (роТро░рпБроЩрпНроХро┐рогрпИроирпНрод)",
                    allCategories: "роЕройрпИродрпНродрпБ",
                    noStoriesFound: "роХродрпИроХро│рпН роОродрпБро╡рпБроорпН роХро┐роЯрпИроХрпНроХро╡ро┐ро▓рпНро▓рпИ. рокро┐ройрпНройро░рпН роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН.",
                    fetchingStories: "рокро▓ роорпВро▓роЩрпНроХро│ро┐ро▓ро┐ро░рпБроирпНродрпБ роирпЗро░рпНрооро▒рпИ роХродрпИроХро│рпИрокрпН рокрпЖро▒рпБроХро┐ро▒родрпБ..."
                }
            }
        };

        // Tamil RSS feeds (copied from main file)
        const tamilFeeds = {
            news18tamil: "https://www.news18.com/rss/tamil.xml",
            tamiloneindia: "https://tamil.oneindia.com/rss/tamil-news-fb.xml",
            zeenewstamil: "https://zeenews.india.com/tamil/rss.xml",
            thehindu: "https://www.thehindu.com/feeder/default.rss",
            ndtv: "https://feeds.feedburner.com/ndtvnews-top-stories",
            indiatoday: "https://www.indiatoday.in/rss/1206578",
            tbi: "https://www.thebetterindia.com/feed/",
            bbc: "http://feeds.bbci.co.uk/news/rss.xml",
            techcrunch: "https://techcrunch.com/feed/",
            hackernews: "https://hnrss.org/frontpage"
        };

        function testUITranslations() {
            const t = translations.ta.ui;
            const requiredKeys = [
                'todaysHighlights', 'readMore', 'source', 'loading', 'translating',
                'refresh', 'listView', 'gridView', 'allSources', 'allCategories',
                'noStoriesFound', 'fetchingStories'
            ];

            let results = '<h4>UI Translation Test Results:</h4>';
            let allPresent = true;

            requiredKeys.forEach(key => {
                const value = t[key];
                const status = value ? 'тЬЕ' : 'тЭМ';
                if (!value) allPresent = false;
                results += `<p>${status} ${key}: ${value || 'MISSING'}</p>`;
            });

            results += `<p><strong>Overall: ${allPresent ? 'тЬЕ All translations present' : 'тЭМ Some translations missing'}</strong></p>`;
            document.getElementById('ui-test-result').innerHTML = results;
        }

        async function testTamilFeeds() {
            const resultDiv = document.getElementById('feed-test-result');
            resultDiv.innerHTML = '<p>Testing Tamil RSS feeds...</p>';
            
            let results = '<h4>RSS Feed Test Results:</h4>';
            let workingCount = 0;
            const totalFeeds = Object.keys(tamilFeeds).length;

            for (const [name, url] of Object.entries(tamilFeeds)) {
                try {
                    const response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(url)}`);
                    const data = await response.json();
                    
                    if (data.status === 'ok' && data.items && data.items.length > 0) {
                        workingCount++;
                        results += `<p>тЬЕ ${name}: ${data.items.length} articles</p>`;
                    } else {
                        results += `<p>тЭМ ${name}: ${data.status || 'No articles'}</p>`;
                    }
                } catch (error) {
                    results += `<p>тЭМ ${name}: Connection error</p>`;
                }
                
                // Rate limiting
                await new Promise(resolve => setTimeout(resolve, 200));
            }

            results += `<p><strong>Summary: ${workingCount}/${totalFeeds} feeds working</strong></p>`;
            resultDiv.innerHTML = results;
        }

        function testContentDetection() {
            function isTamilContent(text) {
                if (!text) return false;
                const tamilRegex = /[\u0B80-\u0BFF]/;
                return tamilRegex.test(text);
            }

            const tamilText = "родрооро┐ро┤рпН роЙро│рпНро│роЯроХрпНроХроорпН: роЗродрпБ роТро░рпБ родрооро┐ро┤рпН роЪрпЖропрпНродро┐ родро▓рпИрокрпНрокрпБ";
            const englishText = "English content: This is an English news headline";
            
            const tamilResult = isTamilContent(tamilText);
            const englishResult = isTamilContent(englishText);
            
            let results = '<h4>Content Detection Test Results:</h4>';
            results += `<p>тЬЕ Tamil text detected: ${tamilResult ? 'YES' : 'NO'}</p>`;
            results += `<p>тЬЕ English text correctly identified as non-Tamil: ${!englishResult ? 'YES' : 'NO'}</p>`;
            results += `<p><strong>Overall: ${tamilResult && !englishResult ? 'тЬЕ Detection working correctly' : 'тЭМ Detection has issues'}</strong></p>`;
            
            document.getElementById('detection-test-result').innerHTML = results;
        }
    </script>
</body>
</html>